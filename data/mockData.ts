import { Ticket, Priority, Status } from '../types';
import { HIERARCHY_DATA } from './hierarchy';

const now = new Date();

const addHours = (date: Date, hours: number): Date => {
  const newDate = new Date(date);
  newDate.setHours(newDate.getHours() + hours);
  return newDate;
};

const addDays = (date: Date, days: number): Date => {
  const newDate = new Date(date);
  newDate.setDate(newDate.getDate() + days);
  return newDate;
}

export const mockTickets: Ticket[] = [
  // Existing Tickets (Portfolios updated to match new hierarchy)
  {
    id: 'INC001001',
    shortDescription: 'User login failures after SSO update',
    portfolio: 'Alpha Core Banking',
    priority: Priority.CRITICAL,
    assignedTo: 'Alice Johnson',
    slaDueDate: addHours(now, 2),
    status: Status.IN_PROGRESS,
    history: [
      { date: addHours(now, -4), entry: 'Ticket created and assigned.', user: 'ServiceNow' },
      { date: addHours(now, -3), entry: 'Initial investigation started.', user: 'Alice Johnson' },
      { date: addHours(now, -1), entry: 'Identified potential conflict with new firewall rule.', user: 'Alice Johnson' },
    ],
    metadata: { 'Configuration Item': 'SSO-PROD-01', 'Impacted Users': 150, 'Contact Type': 'Email' },
  },
  {
    id: 'INC001002',
    shortDescription: 'API transaction latency high',
    portfolio: 'Bravo Payments Gateway',
    priority: Priority.HIGH,
    assignedTo: 'Bob Williams',
    slaDueDate: addHours(now, 22),
    status: Status.IN_PROGRESS,
    history: [
      { date: addHours(now, -8), entry: 'Ticket opened by automated monitoring.', user: 'System Alert' },
      { date: addHours(now, -7), entry: 'Assigned to payments team.', user: 'ServiceNow' },
    ],
    metadata: { 'API Endpoint': '/v2/process_payment', 'Average Latency': '850ms', 'Service': 'Payment Processor' },
  },
  {
    id: 'INC001003',
    shortDescription: 'Customer data not syncing to sales dashboard',
    portfolio: 'Charlie CRM',
    priority: Priority.HIGH,
    assignedTo: 'Charlie Brown',
    slaDueDate: addHours(now, 26),
    status: Status.NEW,
    history: [{ date: addHours(now, -1), entry: 'Ticket created.', user: 'ServiceNow' }],
    metadata: { 'Source System': 'Salesforce', 'Destination System': 'PowerBI Dashboard', 'Last Sync': new Date(now.getTime() - 1000 * 60 * 60 * 3).toISOString() },
  },
  {
    id: 'INC001004',
    shortDescription: 'Server storage alert - nearing capacity',
    portfolio: 'Delta Infrastructure',
    priority: Priority.MODERATE,
    assignedTo: 'David Miller',
    slaDueDate: addHours(now, 72),
    status: Status.IN_PROGRESS,
    history: [{ date: addHours(now, -2), entry: 'Automated ticket creation.', user: 'System Alert' }],
    metadata: { 'Server Name': 'DB-PROD-04', 'Disk Usage': '92%', 'Mount Point': '/var/log' },
  },
  {
    id: 'INC001005',
    shortDescription: 'Failed to process nightly batch job',
    portfolio: 'Alpha Core Banking',
    priority: Priority.HIGH,
    assignedTo: 'Alice Johnson',
    slaDueDate: addHours(now, -2),
    status: Status.IN_PROGRESS,
    history: [
      { date: addHours(now, -10), entry: 'Batch job failure detected.', user: 'System Alert' },
      { date: addHours(now, -9), entry: 'Investigating log files.', user: 'Alice Johnson' },
      { date: addHours(now, -3), entry: 'Escalated to L3 support.', user: 'Alice Johnson' },
    ],
    metadata: { 'Job Name': 'EOD_INTEREST_CALC', 'Error Code': 'ORA-12541', 'Records Processed': '1.2M / 3.5M' },
  },
  {
    id: 'INC001006',
    shortDescription: 'Request for new user account',
    portfolio: 'Charlie CRM',
    priority: Priority.LOW,
    assignedTo: 'Service Desk',
    slaDueDate: addHours(now, 120),
    status: Status.NEW,
    history: [{ date: addHours(now, -24), entry: 'User request submitted via portal.', user: 'Jane Doe' }],
    metadata: { 'Requested For': 'John Smith', 'Department': 'Sales', 'Access Level': 'Read-Only' },
  },
  {
    id: 'INC001007',
    shortDescription: 'Payment confirmation emails are delayed',
    portfolio: 'Bravo Payments Gateway',
    priority: Priority.MODERATE,
    assignedTo: 'Bob Williams',
    slaDueDate: addHours(now, 40),
    status: Status.IN_PROGRESS,
    history: [
      { date: addHours(now, -6), entry: 'Ticket opened.', user: 'Support Team' },
      { date: addHours(now, -4), entry: 'Checking mail queue service.', user: 'Bob Williams' },
    ],
    metadata: { 'Mail Server': 'SMTP-RELAY-02', 'Queue Size': '12,500', 'Average Delay': '15 minutes' },
  },
  {
    id: 'INC001008',
    shortDescription: 'Unable to generate quarterly report',
    portfolio: 'Alpha Core Banking',
    priority: Priority.MODERATE,
    assignedTo: 'Frank Wright',
    slaDueDate: addHours(now, 60),
    status: Status.ON_HOLD,
    history: [
      { date: addHours(now, -48), entry: 'Ticket created.', user: 'End User' },
      { date: addHours(now, -24), entry: 'Awaiting data from Finance.', user: 'Frank Wright' },
    ],
    metadata: { 'Report Name': 'Q2_RISK_ANALYSIS', 'Data Source': 'Financial Data Warehouse', 'Status Reason': 'Awaiting External Data' },
  },
  {
    id: 'INC001009',
    shortDescription: 'VPN connection dropping intermittently',
    portfolio: 'Delta Infrastructure',
    priority: Priority.HIGH,
    assignedTo: 'David Miller',
    slaDueDate: addHours(now, 12),
    status: Status.IN_PROGRESS,
    history: [
      { date: addHours(now, -3), entry: 'Multiple users reported issues.', user: 'Service Desk' },
      { date: addHours(now, -1), entry: 'Checking network load balancer.', user: 'David Miller' },
    ],
    metadata: { 'VPN Concentrator': 'VPN-GW-01', 'Impacted Region': 'EMEA', 'User Count': 45 },
  },
  // New Tickets
  {
    id: 'INC001010',
    shortDescription: 'Mobile app crashes on login screen',
    portfolio: 'Echo Mobile App',
    priority: Priority.CRITICAL,
    assignedTo: 'Grace Lee',
    slaDueDate: addHours(now, 4),
    status: Status.IN_PROGRESS,
    history: [{ date: addHours(now, -1), entry: 'Crash reports received from 50+ users.', user: 'System Alert' }],
    metadata: { 'App Version': '3.2.1', 'OS': 'iOS 17.5', 'Crash Rate': '8%' },
  },
  {
    id: 'INC001011',
    shortDescription: 'Online banking portal is slow to load',
    portfolio: 'Foxtrot Online Banking',
    priority: Priority.HIGH,
    assignedTo: 'Henry Scott',
    slaDueDate: addHours(now, 18),
    status: Status.NEW,
    history: [{ date: addHours(now, -2), entry: 'Ticket created by user complaint.', user: 'Support Team' }],
    metadata: { 'Page Load Time': '12.5s', 'Affected Page': '/dashboard', 'Browser': 'Chrome' },
  },
  {
    id: 'INC001012',
    shortDescription: 'Investment portfolio chart not displaying data',
    portfolio: 'India Investments Platform',
    priority: Priority.MODERATE,
    assignedTo: 'Ivy Green',
    slaDueDate: addHours(now, 48),
    status: Status.IN_PROGRESS,
    history: [{ date: addHours(now, -5), entry: 'User reported issue.', user: 'Service Desk' }, { date: addHours(now, -3), entry: 'Data API confirmed as source of problem.', user: 'Ivy Green' }],
    metadata: { 'API Endpoint': '/v1/charts/portfolio', 'Error': '503 Service Unavailable', 'User': 'j.doe' },
  },
  {
    id: 'INC001013',
    shortDescription: 'New advisory tool feature request',
    portfolio: 'Juliett Advisory Tools',
    priority: Priority.LOW,
    assignedTo: 'Product Team',
    slaDueDate: addDays(now, 14),
    status: Status.NEW,
    history: [{ date: addDays(now, -1), entry: 'Feature request submitted.', user: 'Financial Advisor' }],
    metadata: { 'Feature': 'AI-based risk analysis', 'Status': 'Backlog' },
  },
  {
    id: 'INC001014',
    shortDescription: 'Credit card transaction declined incorrectly',
    portfolio: 'November Credit Cards',
    priority: Priority.HIGH,
    assignedTo: 'Bob Williams',
    slaDueDate: addHours(now, 10),
    status: Status.IN_PROGRESS,
    history: [{ date: addHours(now, -3), entry: 'User called support line.', user: 'Call Center' }],
    metadata: { 'Transaction ID': 'txn_123abc456', 'Decline Reason': 'Fraud detection false positive', 'Merchant': 'Amazon.com' },
  },
  {
    id: 'INC001015',
    shortDescription: 'HR platform unresponsive',
    portfolio: 'Romeo HR Platform',
    priority: Priority.CRITICAL,
    assignedTo: 'Leo King',
    slaDueDate: addHours(now, 1),
    status: Status.IN_PROGRESS,
    history: [{ date: addHours(now, -0.5), entry: 'System-wide outage detected.', user: 'System Alert' }],
    metadata: { 'Service': 'HR-Core-API', 'Status': 'Offline', 'Impact': 'All employees' },
  },
  {
    id: 'INC001016',
    shortDescription: 'Cloud server provisioning failure',
    portfolio: 'Victor Cloud Services',
    priority: Priority.MODERATE,
    assignedTo: 'David Miller',
    slaDueDate: addHours(now, 36),
    status: Status.ON_HOLD,
    history: [{ date: addHours(now, -12), entry: 'Automated provisioning script failed.', user: 'DevOps' }, { date: addHours(now, -6), entry: 'Awaiting quota increase from cloud provider.', user: 'David Miller' }],
    metadata: { 'Cloud Provider': 'AWS', 'Region': 'us-east-1', 'Resource': 'EC2 Instance', 'Reason': 'Insufficient vCPU capacity' },
  },
  // Resolved Tickets
  {
    id: 'INC000950',
    shortDescription: 'Onboarding documentation requires update',
    portfolio: 'Charlie CRM',
    priority: Priority.LOW,
    assignedTo: 'Charlie Brown',
    slaDueDate: addDays(now, -5),
    status: Status.RESOLVED,
    resolvedDate: addDays(now, -2),
    history: [{ date: addDays(now, -5), entry: 'Ticket created.', user: 'Charlie Brown' }, { date: addDays(now, -2), entry: 'Documentation updated and ticket closed.', user: 'Charlie Brown' }],
    metadata: { 'Document': 'Onboarding Guide v2.1', 'Section': 'API Access' },
  },
  {
    id: 'INC000955',
    shortDescription: 'Password reset for staging environment',
    portfolio: 'Delta Infrastructure',
    priority: Priority.MODERATE,
    assignedTo: 'Service Desk',
    slaDueDate: addDays(now, -10),
    status: Status.RESOLVED,
    resolvedDate: addDays(now, -10),
    history: [{ date: addDays(now, -10), entry: 'User requested password reset, completed.', user: 'Service Desk' }],
    metadata: { 'User': 'test_user_01', 'Environment': 'Staging' },
  },
  {
    id: 'INC000960',
    shortDescription: 'Critical vulnerability patch required',
    portfolio: 'Alpha Core Banking',
    priority: Priority.CRITICAL,
    assignedTo: 'Security Team',
    slaDueDate: addDays(now, -40),
    status: Status.RESOLVED,
    resolvedDate: addDays(now, -38),
    history: [{ date: addDays(now, -40), entry: 'Alert from security scanner.', user: 'System Alert' }, { date: addDays(now, -38), entry: 'Patch deployed across all production servers.', user: 'Security Team' }],
    metadata: { 'CVE': 'CVE-2023-12345', 'Patched Systems': 32 },
  },
  {
    id: 'INC000970',
    shortDescription: 'Third-party payment processor outage',
    portfolio: 'Bravo Payments Gateway',
    priority: Priority.CRITICAL,
    assignedTo: 'Bob Williams',
    slaDueDate: addDays(now, -80),
    status: Status.RESOLVED,
    resolvedDate: addDays(now, -80),
    history: [{ date: addDays(now, -80), entry: 'Third-party service went down.', user: 'System Alert' }, { date: addDays(now, -80), entry: 'Service restored, monitoring.', user: 'Bob Williams' }],
    metadata: { 'Provider': 'Stripe', 'Downtime': '45 minutes' },
  },
  {
    id: 'INC000980',
    shortDescription: 'Finance ERP report generation failed',
    portfolio: 'Sierra Finance ERP',
    priority: Priority.HIGH,
    assignedTo: 'Support Team',
    slaDueDate: addDays(now, -15),
    status: Status.RESOLVED,
    resolvedDate: addDays(now, -14),
    history: [{ date: addDays(now, -15), entry: 'Nightly report job failed.', user: 'System Alert' }, { date: addDays(now, -14), entry: 'Database connection issue resolved.', user: 'Support Team' }],
    metadata: { 'Report': 'Q_END_GL_SUMMARY', 'Database': 'FIN-PROD-DB' },
  },
];
